{% extends 'base.html' %}
{% block title %}
    <title>Blog - Tous les articles</title>
{% endblock %}
{% block content %}
    <h1>Liste des Articles</h1>
    <br>
    <a href="{% url 'article-create' %}"><button class="btn btn-warning">Créer un article</button></a>
    <br><br>
    <ul>
    {% for post in articles %}
        <li><a href="{% url 'post-detail' pk=post.id %}"> {{ post.titre }} </a> - {{ post.date_publication }} </li>
        <p>Ecrit par {{ post.auteur.username }} : {{ post.auteur.email}}</p>
        <p>Categorie  : {{post.categorie.nom}} </p>
        <p>{{ post.contenu|linebreaks|truncatewords:10 }}</p>
    {% endfor %}
    </ul>

    <!-- Pagination -->
    {% if is_paginated %}
    <div class="pagination">
    <span class="step-links">
    {% if page_obj.has_previous %}
    <a href="?page=1">&laquo; première</a>
    <a href="?page={{ page_obj.previous_page_number }}">précédente</a>
    {% endif %}
    <span class="current">
    Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}.
    </span>
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">suivante</a>
    <a href="?page={{ page_obj.paginator.num_pages }}">dernière &raquo;</a>
    {% endif %}
    </span>
    </div>
    {% endif %}

{% endblock%}